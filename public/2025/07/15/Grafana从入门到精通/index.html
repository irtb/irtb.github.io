<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Grafana从入门到精通 | 識魚逐鹿</title><meta name="author" content="識魚逐鹿"><meta name="copyright" content="識魚逐鹿"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Grafana 是一个功能强大的开源平台，专为监控和数据可视化而设计。它能够帮助用户以直观的方式展示和分析时间序列数据，如服务器性能指标、应用程序日志、数据库查询结果等。Grafana 支持多种数据源，包括 Prometheus、InfluxDB、Graphite、Elasticsearch 等，并提供了丰富的图表类型和插件，使其成为 DevOps、IT 运营和数据分析领域的首选工具。 本文将带你">
<meta property="og:type" content="article">
<meta property="og:title" content="Grafana从入门到精通">
<meta property="og:url" content="https://liuzexiao.com/2025/07/15/Grafana%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E7%B2%BE%E9%80%9A/index.html">
<meta property="og:site_name" content="識魚逐鹿">
<meta property="og:description" content="Grafana 是一个功能强大的开源平台，专为监控和数据可视化而设计。它能够帮助用户以直观的方式展示和分析时间序列数据，如服务器性能指标、应用程序日志、数据库查询结果等。Grafana 支持多种数据源，包括 Prometheus、InfluxDB、Graphite、Elasticsearch 等，并提供了丰富的图表类型和插件，使其成为 DevOps、IT 运营和数据分析领域的首选工具。 本文将带你">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://liuzexiao.com/img/butterfly-icon.png">
<meta property="article:published_time" content="2025-07-15T06:50:23.000Z">
<meta property="article:modified_time" content="2025-10-17T08:58:31.842Z">
<meta property="article:author" content="識魚逐鹿">
<meta property="article:tag" content="前端开发">
<meta property="article:tag" content="算法艺术">
<meta property="article:tag" content="诗意编程">
<meta property="article:tag" content="技术哲学">
<meta property="article:tag" content="开源精神">
<meta property="article:tag" content="Frontend Engineering">
<meta property="article:tag" content="Algorithmic Art">
<meta property="article:tag" content="Creative Coding">
<meta property="article:tag" content="Tech Philosophy">
<meta property="article:tag" content="Open Source">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://liuzexiao.com/img/butterfly-icon.png"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Grafana从入门到精通",
  "url": "https://liuzexiao.com/2025/07/15/Grafana%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E7%B2%BE%E9%80%9A/",
  "image": "https://liuzexiao.com/img/butterfly-icon.png",
  "datePublished": "2025-07-15T06:50:23.000Z",
  "dateModified": "2025-10-17T08:58:31.842Z",
  "author": [
    {
      "@type": "Person",
      "name": "識魚逐鹿",
      "url": "https://liuzexiao.com"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://liuzexiao.com/2025/07/15/Grafana%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E7%B2%BE%E9%80%9A/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=5.5.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.12.0/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Grafana从入门到精通',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 7.3.0"></head><body><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">識魚逐鹿</span></a><a class="nav-page-title" href="/"><span class="site-name">Grafana从入门到精通</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  返回首页</span></span></a></span><div id="menus"></div></nav><div id="post-info"><h1 class="post-title">Grafana从入门到精通</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-07-15T06:50:23.000Z" title="发表于 2025-07-15 14:50:23">2025-07-15</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-10-17T08:58:31.842Z" title="更新于 2025-10-17 16:58:31">2025-10-17</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><p><strong>Grafana</strong> 是一个功能强大的开源平台，专为监控和数据可视化而设计。它能够帮助用户以直观的方式展示和分析时间序列数据，如服务器性能指标、应用程序日志、数据库查询结果等。Grafana 支持多种数据源，包括 Prometheus、InfluxDB、Graphite、Elasticsearch 等，并提供了丰富的图表类型和插件，使其成为 DevOps、IT 运营和数据分析领域的首选工具。</p>
<p>本文将带你从 Grafana 的基础知识开始，逐步深入到其高级功能，帮助你全面掌握这一工具。无论你是初学者还是有一定经验的用户，都能在这里找到有价值的内容。本文共约 5000 字，涵盖安装、核心功能、高级特性和实际用例，结构清晰，适合学习和参考。</p>
<hr>
<h2 id="1-grafana-入门"><a class="markdownIt-Anchor" href="#1-grafana-入门">#</a> 1. Grafana 入门</h2>
<h3 id="11-什么是-grafana"><a class="markdownIt-Anchor" href="#11-什么是-grafana">#</a> 1.1 什么是 Grafana？</h3>
<p>Grafana 是一个开源的监控和数据可视化平台，最初由 Torkel Ödegaard 于 2014 年创建。它允许用户通过仪表板（Dashboard）展示来自各种数据源的数据，支持多种图表类型，如折线图、柱状图、热力图等。Grafana 的设计目标是提供一个灵活、易用的界面，使用户能够快速创建和分享数据可视化。</p>
<p>其主要特点包括：</p>
<ul>
<li><strong>多数据源支持</strong>：兼容 Prometheus、InfluxDB、MySQL、PostgreSQL 等。</li>
<li><strong>丰富的可视化选项</strong>：提供多种图表和插件。</li>
<li><strong>高度可定制性</strong>：支持模板变量、动态查询等。</li>
</ul>
<h3 id="12-安装-grafana"><a class="markdownIt-Anchor" href="#12-安装-grafana">#</a> 1.2 安装 Grafana</h3>
<p>Grafana 支持在多种操作系统上安装，包括 Linux、Windows 和 macOS。以下是安装的基本步骤。</p>
<h4 id="121-在-linux-上安装"><a class="markdownIt-Anchor" href="#121-在-linux-上安装">#</a> 1.2.1 在 Linux 上安装</h4>
<ul>
<li>
<p><strong>Debian/Ubuntu</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get update</span><br><span class="line"><span class="built_in">sudo</span> apt-get install -y adduser libfontconfig1</span><br><span class="line">wget https://dl.grafana.com/oss/release/grafana_8.0.0_amd64.deb</span><br><span class="line"><span class="built_in">sudo</span> dpkg -i grafana_8.0.0_amd64.deb</span><br><span class="line"><span class="built_in">sudo</span> systemctl start grafana-server</span><br><span class="line"><span class="built_in">sudo</span> systemctl <span class="built_in">enable</span> grafana-server</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><strong>Red Hat/CentOS</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> yum install -y https://dl.grafana.com/oss/release/grafana-8.0.0-1.x86_64.rpm</span><br><span class="line"><span class="built_in">sudo</span> systemctl start grafana-server</span><br><span class="line"><span class="built_in">sudo</span> systemctl <span class="built_in">enable</span> grafana-server</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="122-在-windows-上安装"><a class="markdownIt-Anchor" href="#122-在-windows-上安装">#</a> 1.2.2 在 Windows 上安装</h4>
<ol>
<li>从 <a target="_blank" rel="noopener" href="https://grafana.com/grafana/download">Grafana 官网</a> 下载 Windows 安装包。</li>
<li>运行安装程序，按照提示完成安装。</li>
<li>安装完成后，手动启动 Grafana 服务或通过命令行运行：<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grafana-server.exe</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="123-在-macos-上安装"><a class="markdownIt-Anchor" href="#123-在-macos-上安装">#</a> 1.2.3 在 macOS 上安装</h4>
<ul>
<li>使用 Homebrew：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">brew update</span><br><span class="line">brew install grafana</span><br><span class="line">brew services start grafana</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>安装完成后，访问  <code>http://localhost:3000</code> ，默认用户名和密码均为  <code>admin</code> 。首次登录后，建议更改密码。</p>
<h3 id="13-配置数据源"><a class="markdownIt-Anchor" href="#13-配置数据源">#</a> 1.3 配置数据源</h3>
<p>数据源是 Grafana 的基础，用于连接外部数据存储。以下是如何配置常见数据源的步骤。</p>
<h4 id="131-添加-prometheus-数据源"><a class="markdownIt-Anchor" href="#131-添加-prometheus-数据源">#</a> 1.3.1 添加 Prometheus 数据源</h4>
<ol>
<li>登录 Grafana。</li>
<li>点击左侧菜单 <strong>Configuration</strong>（齿轮图标）&gt; <strong>Data Sources</strong>。</li>
<li>点击 <strong>Add data source</strong>，选择 <strong>Prometheus</strong>。</li>
<li>在 <strong>HTTP</strong> 部分，输入 Prometheus 的 URL（例如  <code>http://localhost:9090</code> ）。</li>
<li>点击 <strong>Save &amp; Test</strong> 验证连接。</li>
</ol>
<h4 id="132-添加-influxdb-数据源"><a class="markdownIt-Anchor" href="#132-添加-influxdb-数据源">#</a> 1.3.2 添加 InfluxDB 数据源</h4>
<ol>
<li>选择 <strong>InfluxDB</strong> 数据源。</li>
<li>输入 URL（如  <code>http://localhost:8086</code> ）、数据库名称、用户名和密码。</li>
<li>点击 <strong>Save &amp; Test</strong>。</li>
</ol>
<p>完成配置后，Grafana 即可从数据源拉取数据用于可视化。</p>
<hr>
<h2 id="2-grafana-核心功能"><a class="markdownIt-Anchor" href="#2-grafana-核心功能">#</a> 2. Grafana 核心功能</h2>
<h3 id="21-仪表板dashboard"><a class="markdownIt-Anchor" href="#21-仪表板dashboard">#</a> 2.1 仪表板（Dashboard）</h3>
<p>仪表板是 Grafana 的核心组件，用于组织和展示多个面板（Panel）。</p>
<h4 id="211-创建仪表板"><a class="markdownIt-Anchor" href="#211-创建仪表板">#</a> 2.1.1 创建仪表板</h4>
<ol>
<li>点击左侧菜单 <strong>+</strong> 图标 &gt; <strong>Dashboard</strong>。</li>
<li>点击 <strong>Add new panel</strong>。</li>
<li>选择数据源并输入查询。</li>
<li>选择图表类型（如折线图）。</li>
<li>配置标题、描述等，点击 <strong>Apply</strong> 保存。</li>
</ol>
<h4 id="212-管理仪表板"><a class="markdownIt-Anchor" href="#212-管理仪表板">#</a> 2.1.2 管理仪表板</h4>
<ul>
<li><strong>保存</strong>：点击右上角 <strong>Save</strong> 按钮。</li>
<li><strong>分享</strong>：点击 <strong>Share</strong>，生成链接或嵌入代码。</li>
<li><strong>导出 / 导入</strong>：通过 JSON 格式备份或恢复仪表板。</li>
</ul>
<h3 id="22-面板panel"><a class="markdownIt-Anchor" href="#22-面板panel">#</a> 2.2 面板（Panel）</h3>
<p>面板是仪表板的基本单元，支持多种可视化类型。</p>
<h4 id="221-面板类型"><a class="markdownIt-Anchor" href="#221-面板类型">#</a> 2.2.1 面板类型</h4>
<ul>
<li><strong>图表（Graph）</strong>：展示时间序列数据。</li>
<li><strong>单值（Singlestat）</strong>：显示单个指标。</li>
<li><strong>表格（Table）</strong>：以表格形式展示数据。</li>
<li><strong>热力图（Heatmap）</strong>：显示数据密度。</li>
</ul>
<h4 id="222-配置面板"><a class="markdownIt-Anchor" href="#222-配置面板">#</a> 2.2.2 配置面板</h4>
<ol>
<li>在面板编辑模式下，选择数据源。</li>
<li>输入查询（如 PromQL 或 SQL）。</li>
<li>调整图表样式、颜色、图例等。</li>
</ol>
<h4 id="223-使用模板变量"><a class="markdownIt-Anchor" href="#223-使用模板变量">#</a> 2.2.3 使用模板变量</h4>
<p>模板变量使仪表板更具交互性。例如，创建一个服务器选择器：</p>
<ol>
<li>点击仪表板设置（齿轮图标）&gt; <strong>Variables</strong>。</li>
<li>点击 <strong>Add variable</strong>。</li>
<li>设置名称（如  <code>server</code> ），类型为 <strong>Query</strong>。</li>
<li>输入查询（如  <code>label_values(node_cpu_seconds_total, instance)</code> ）。</li>
<li>在面板查询中使用变量：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rate(node_cpu_seconds_total&#123;instance=&quot;$server&quot;&#125;[5m])</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="23-查询语言"><a class="markdownIt-Anchor" href="#23-查询语言">#</a> 2.3 查询语言</h3>
<p>查询语言因数据源而异。以下是常见示例：</p>
<h4 id="231-promqlprometheus"><a class="markdownIt-Anchor" href="#231-promqlprometheus">#</a> 2.3.1 PromQL（Prometheus）</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sum(rate(http_requests_total[5m])) by (status_code)</span><br></pre></td></tr></table></figure>
<p>显示每 5 分钟的 HTTP 请求速率，按状态码分组。</p>
<h4 id="232-influxqlinfluxdb"><a class="markdownIt-Anchor" href="#232-influxqlinfluxdb">#</a> 2.3.2 InfluxQL（InfluxDB）</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> mean(&quot;value&quot;) <span class="keyword">FROM</span> &quot;cpu_usage&quot; <span class="keyword">WHERE</span> <span class="type">time</span> <span class="operator">&gt;=</span> now() <span class="operator">-</span> <span class="number">1</span>h <span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="type">time</span>(<span class="number">10</span>m)</span><br></pre></td></tr></table></figure>
<p>显示过去 1 小时的 CPU 使用率，每 10 分钟平均。</p>
<hr>
<h2 id="3-grafana-高级功能"><a class="markdownIt-Anchor" href="#3-grafana-高级功能">#</a> 3. Grafana 高级功能</h2>
<h3 id="31-警报alerting"><a class="markdownIt-Anchor" href="#31-警报alerting">#</a> 3.1 警报（Alerting）</h3>
<p>Grafana 允许设置警报，当数据达到阈值时通知用户。</p>
<h4 id="311-设置警报"><a class="markdownIt-Anchor" href="#311-设置警报">#</a> 3.1.1 设置警报</h4>
<ol>
<li>在面板编辑模式下，点击 <strong>Alert</strong> 选项卡。</li>
<li>点击 <strong>Create Alert</strong>。</li>
<li>配置条件（如  <code>WHEN avg() OF query(A) IS ABOVE 80</code> ）。</li>
<li>设置通知渠道（需提前配置，如 Email 或 Slack）。</li>
<li>保存警报规则。</li>
</ol>
<h4 id="312-管理警报"><a class="markdownIt-Anchor" href="#312-管理警报">#</a> 3.1.2 管理警报</h4>
<ul>
<li><strong>状态</strong>：仪表板上以图标显示警报状态（绿色正常，红色触发）。</li>
<li><strong>历史</strong>：在 <strong>Alerting</strong> &gt; <strong>Alert Rules</strong> 查看。</li>
</ul>
<h3 id="32-用户管理与权限控制"><a class="markdownIt-Anchor" href="#32-用户管理与权限控制">#</a> 3.2 用户管理与权限控制</h3>
<p>Grafana 提供用户和团队管理功能，适合多人协作。</p>
<h4 id="321-用户管理"><a class="markdownIt-Anchor" href="#321-用户管理">#</a> 3.2.1 用户管理</h4>
<ul>
<li>
<p><strong>添加用户</strong>：</p>
<ol>
<li>点击 <strong>Configuration</strong> &gt; <strong>Users</strong>。</li>
<li>点击 <strong>Invite User</strong>，输入邮箱和角色（Admin、Editor、Viewer）。</li>
</ol>
</li>
<li>
<p><strong>角色说明</strong>：</p>
<ul>
<li><strong>Admin</strong>：完全控制。</li>
<li><strong>Editor</strong>：可编辑仪表板。</li>
<li><strong>Viewer</strong>：只读权限。</li>
</ul>
</li>
</ul>
<h4 id="322-团队管理"><a class="markdownIt-Anchor" href="#322-团队管理">#</a> 3.2.2 团队管理</h4>
<ul>
<li><strong>创建团队</strong>：
<ol>
<li>点击 <strong>Configuration</strong> &gt; <strong>Teams</strong>。</li>
<li>点击 <strong>New Team</strong>，添加成员。</li>
</ol>
</li>
<li><strong>权限</strong>：为团队分配仪表板或文件夹访问权限。</li>
</ul>
<h3 id="33-插件"><a class="markdownIt-Anchor" href="#33-插件">#</a> 3.3 插件</h3>
<p>插件扩展了 Grafana 的功能。</p>
<h4 id="331-安装插件"><a class="markdownIt-Anchor" href="#331-安装插件">#</a> 3.3.1 安装插件</h4>
<ul>
<li>
<p><strong>命令行</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">grafana-cli plugins install grafana-piechart-panel</span><br><span class="line"><span class="built_in">sudo</span> systemctl restart grafana-server</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><strong>手动</strong>：下载插件 ZIP 文件，解压到 Grafana 插件目录。</p>
</li>
</ul>
<h4 id="332-常用插件"><a class="markdownIt-Anchor" href="#332-常用插件">#</a> 3.3.2 常用插件</h4>
<ul>
<li><strong>Pie Chart</strong>：饼图展示。</li>
<li><strong>Worldmap Panel</strong>：地理数据可视化。</li>
<li><strong>Zabbix</strong>：集成 Zabbix 数据。</li>
</ul>
<hr>
<h2 id="4-实际用例和示例"><a class="markdownIt-Anchor" href="#4-实际用例和示例">#</a> 4. 实际用例和示例</h2>
<h3 id="41-监控服务器性能"><a class="markdownIt-Anchor" href="#41-监控服务器性能">#</a> 4.1 监控服务器性能</h3>
<p>假设使用 Prometheus 收集服务器指标。</p>
<h4 id="411-配置数据源"><a class="markdownIt-Anchor" href="#411-配置数据源">#</a> 4.1.1 配置数据源</h4>
<ul>
<li>添加 Prometheus 数据源（URL： <code>http://localhost:9090</code> ）。</li>
</ul>
<h4 id="412-创建仪表板"><a class="markdownIt-Anchor" href="#412-创建仪表板">#</a> 4.1.2 创建仪表板</h4>
<ol>
<li>创建仪表板，添加 <strong>Graph</strong> 面板。</li>
<li>查询 CPU 使用率：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">100 - (avg by (instance) (irate(node_cpu_seconds_total&#123;mode=&quot;idle&quot;&#125;[5m])) * 100)</span><br></pre></td></tr></table></figure>
</li>
<li>查询内存使用率：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(node_memory_MemTotal_bytes - node_memory_MemAvailable_bytes) / node_memory_MemTotal_bytes * 100</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="413-设置警报"><a class="markdownIt-Anchor" href="#413-设置警报">#</a> 4.1.3 设置警报</h4>
<ul>
<li>在 CPU 面板上设置警报，条件：CPU 使用率 &gt; 80% 持续 5 分钟。</li>
</ul>
<h3 id="42-分析-web-应用程序性能"><a class="markdownIt-Anchor" href="#42-分析-web-应用程序性能">#</a> 4.2 分析 Web 应用程序性能</h3>
<p>假设使用 InfluxDB 存储请求数据。</p>
<h4 id="421-配置数据源"><a class="markdownIt-Anchor" href="#421-配置数据源">#</a> 4.2.1 配置数据源</h4>
<ul>
<li>添加 InfluxDB 数据源（URL： <code>http://localhost:8086</code> ）。</li>
</ul>
<h4 id="422-创建仪表板"><a class="markdownIt-Anchor" href="#422-创建仪表板">#</a> 4.2.2 创建仪表板</h4>
<ol>
<li>添加 <strong>Graph</strong> 面板。</li>
<li>查询响应时间：<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> mean(&quot;response_time&quot;) <span class="keyword">FROM</span> &quot;http_requests&quot; <span class="keyword">WHERE</span> <span class="type">time</span> <span class="operator">&gt;=</span> now() <span class="operator">-</span> <span class="number">1</span>h <span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="type">time</span>(<span class="number">10</span>m)</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="423-使用模板变量"><a class="markdownIt-Anchor" href="#423-使用模板变量">#</a> 4.2.3 使用模板变量</h4>
<ul>
<li>添加变量  <code>status_code</code> ，查询： <code>SHOW TAG VALUES WITH KEY = &quot;status_code&quot;</code> 。</li>
<li>修改查询： <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> mean(&quot;response_time&quot;) <span class="keyword">FROM</span> &quot;http_requests&quot; <span class="keyword">WHERE</span> &quot;status_code&quot; <span class="operator">=</span> $status_code <span class="keyword">AND</span> <span class="type">time</span> <span class="operator">&gt;=</span> now() <span class="operator">-</span> <span class="number">1</span>h <span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="type">time</span>(<span class="number">10</span>m)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h2 id="5-总结"><a class="markdownIt-Anchor" href="#5-总结">#</a> 5. 总结</h2>
<p>Grafana 是一个强大且灵活的工具，适用于服务器监控、应用程序性能分析等多种场景。本文从安装配置到高级功能，结合实际用例，全面介绍了 Grafana 的使用方法。要精通 Grafana，建议多实践，探索插件和 API 集成等功能。Grafana 社区提供了丰富的资源，如官方文档和论坛，可供深入学习。</p>
<hr>
<p><strong>参考资料</strong>：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://grafana.com/docs/">Grafana 官方文档</a></li>
<li><a target="_blank" rel="noopener" href="https://prometheus.io/docs/">Prometheus 官方文档</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.influxdata.com/influxdb/">InfluxDB 官方文档</a></li>
</ul>
<p><strong>作者</strong>：Assistant<br>
<strong> 日期</strong>：2025 年 7 月 15 日</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://liuzexiao.com">識魚逐鹿</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://liuzexiao.com/2025/07/15/Grafana%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E7%B2%BE%E9%80%9A/">https://liuzexiao.com/2025/07/15/Grafana%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E7%B2%BE%E9%80%9A/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://liuzexiao.com" target="_blank">識魚逐鹿</a>！</span></div></div><div class="tag_share"><div class="post-share"><div class="social-share" data-image="/img/butterfly-icon.png" data-sites="facebook,x,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related full-width" href="/2025/10/17/hello-world/" title="Hello World"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">Hello World</div></div><div class="info-2"><div class="info-item-1">Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. # Quick Start # Create a new post 1$ hexo new &quot;My New Post&quot; More info: Writing # Run server 1$ hexo server More info: Server # Generate static files 1$ hexo generate More info: Generating # Deploy to remote sites 1$ hexo deploy More info: Deployment </div></div></div></a></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/butterfly-icon.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">識魚逐鹿</div><div class="author-info-description">毕竟几人真得鹿，不知终日梦为鱼。
How few the deer in truth attain,
While most as fish in dreams remain.
</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">2</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-grafana-%E5%85%A5%E9%97%A8"><span class="toc-number">1.</span> <span class="toc-text"> 1. Grafana 入门</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#11-%E4%BB%80%E4%B9%88%E6%98%AF-grafana"><span class="toc-number">1.1.</span> <span class="toc-text"> 1.1 什么是 Grafana？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-%E5%AE%89%E8%A3%85-grafana"><span class="toc-number">1.2.</span> <span class="toc-text"> 1.2 安装 Grafana</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#121-%E5%9C%A8-linux-%E4%B8%8A%E5%AE%89%E8%A3%85"><span class="toc-number">1.2.1.</span> <span class="toc-text"> 1.2.1 在 Linux 上安装</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#122-%E5%9C%A8-windows-%E4%B8%8A%E5%AE%89%E8%A3%85"><span class="toc-number">1.2.2.</span> <span class="toc-text"> 1.2.2 在 Windows 上安装</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#123-%E5%9C%A8-macos-%E4%B8%8A%E5%AE%89%E8%A3%85"><span class="toc-number">1.2.3.</span> <span class="toc-text"> 1.2.3 在 macOS 上安装</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-%E9%85%8D%E7%BD%AE%E6%95%B0%E6%8D%AE%E6%BA%90"><span class="toc-number">1.3.</span> <span class="toc-text"> 1.3 配置数据源</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#131-%E6%B7%BB%E5%8A%A0-prometheus-%E6%95%B0%E6%8D%AE%E6%BA%90"><span class="toc-number">1.3.1.</span> <span class="toc-text"> 1.3.1 添加 Prometheus 数据源</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#132-%E6%B7%BB%E5%8A%A0-influxdb-%E6%95%B0%E6%8D%AE%E6%BA%90"><span class="toc-number">1.3.2.</span> <span class="toc-text"> 1.3.2 添加 InfluxDB 数据源</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-grafana-%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD"><span class="toc-number">2.</span> <span class="toc-text"> 2. Grafana 核心功能</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#21-%E4%BB%AA%E8%A1%A8%E6%9D%BFdashboard"><span class="toc-number">2.1.</span> <span class="toc-text"> 2.1 仪表板（Dashboard）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#211-%E5%88%9B%E5%BB%BA%E4%BB%AA%E8%A1%A8%E6%9D%BF"><span class="toc-number">2.1.1.</span> <span class="toc-text"> 2.1.1 创建仪表板</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#212-%E7%AE%A1%E7%90%86%E4%BB%AA%E8%A1%A8%E6%9D%BF"><span class="toc-number">2.1.2.</span> <span class="toc-text"> 2.1.2 管理仪表板</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#22-%E9%9D%A2%E6%9D%BFpanel"><span class="toc-number">2.2.</span> <span class="toc-text"> 2.2 面板（Panel）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#221-%E9%9D%A2%E6%9D%BF%E7%B1%BB%E5%9E%8B"><span class="toc-number">2.2.1.</span> <span class="toc-text"> 2.2.1 面板类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#222-%E9%85%8D%E7%BD%AE%E9%9D%A2%E6%9D%BF"><span class="toc-number">2.2.2.</span> <span class="toc-text"> 2.2.2 配置面板</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#223-%E4%BD%BF%E7%94%A8%E6%A8%A1%E6%9D%BF%E5%8F%98%E9%87%8F"><span class="toc-number">2.2.3.</span> <span class="toc-text"> 2.2.3 使用模板变量</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#23-%E6%9F%A5%E8%AF%A2%E8%AF%AD%E8%A8%80"><span class="toc-number">2.3.</span> <span class="toc-text"> 2.3 查询语言</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#231-promqlprometheus"><span class="toc-number">2.3.1.</span> <span class="toc-text"> 2.3.1 PromQL（Prometheus）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#232-influxqlinfluxdb"><span class="toc-number">2.3.2.</span> <span class="toc-text"> 2.3.2 InfluxQL（InfluxDB）</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-grafana-%E9%AB%98%E7%BA%A7%E5%8A%9F%E8%83%BD"><span class="toc-number">3.</span> <span class="toc-text"> 3. Grafana 高级功能</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#31-%E8%AD%A6%E6%8A%A5alerting"><span class="toc-number">3.1.</span> <span class="toc-text"> 3.1 警报（Alerting）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#311-%E8%AE%BE%E7%BD%AE%E8%AD%A6%E6%8A%A5"><span class="toc-number">3.1.1.</span> <span class="toc-text"> 3.1.1 设置警报</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#312-%E7%AE%A1%E7%90%86%E8%AD%A6%E6%8A%A5"><span class="toc-number">3.1.2.</span> <span class="toc-text"> 3.1.2 管理警报</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#32-%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86%E4%B8%8E%E6%9D%83%E9%99%90%E6%8E%A7%E5%88%B6"><span class="toc-number">3.2.</span> <span class="toc-text"> 3.2 用户管理与权限控制</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#321-%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86"><span class="toc-number">3.2.1.</span> <span class="toc-text"> 3.2.1 用户管理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#322-%E5%9B%A2%E9%98%9F%E7%AE%A1%E7%90%86"><span class="toc-number">3.2.2.</span> <span class="toc-text"> 3.2.2 团队管理</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#33-%E6%8F%92%E4%BB%B6"><span class="toc-number">3.3.</span> <span class="toc-text"> 3.3 插件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#331-%E5%AE%89%E8%A3%85%E6%8F%92%E4%BB%B6"><span class="toc-number">3.3.1.</span> <span class="toc-text"> 3.3.1 安装插件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#332-%E5%B8%B8%E7%94%A8%E6%8F%92%E4%BB%B6"><span class="toc-number">3.3.2.</span> <span class="toc-text"> 3.3.2 常用插件</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E5%AE%9E%E9%99%85%E7%94%A8%E4%BE%8B%E5%92%8C%E7%A4%BA%E4%BE%8B"><span class="toc-number">4.</span> <span class="toc-text"> 4. 实际用例和示例</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#41-%E7%9B%91%E6%8E%A7%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%80%A7%E8%83%BD"><span class="toc-number">4.1.</span> <span class="toc-text"> 4.1 监控服务器性能</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#411-%E9%85%8D%E7%BD%AE%E6%95%B0%E6%8D%AE%E6%BA%90"><span class="toc-number">4.1.1.</span> <span class="toc-text"> 4.1.1 配置数据源</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#412-%E5%88%9B%E5%BB%BA%E4%BB%AA%E8%A1%A8%E6%9D%BF"><span class="toc-number">4.1.2.</span> <span class="toc-text"> 4.1.2 创建仪表板</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#413-%E8%AE%BE%E7%BD%AE%E8%AD%A6%E6%8A%A5"><span class="toc-number">4.1.3.</span> <span class="toc-text"> 4.1.3 设置警报</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#42-%E5%88%86%E6%9E%90-web-%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E6%80%A7%E8%83%BD"><span class="toc-number">4.2.</span> <span class="toc-text"> 4.2 分析 Web 应用程序性能</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#421-%E9%85%8D%E7%BD%AE%E6%95%B0%E6%8D%AE%E6%BA%90"><span class="toc-number">4.2.1.</span> <span class="toc-text"> 4.2.1 配置数据源</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#422-%E5%88%9B%E5%BB%BA%E4%BB%AA%E8%A1%A8%E6%9D%BF"><span class="toc-number">4.2.2.</span> <span class="toc-text"> 4.2.2 创建仪表板</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#423-%E4%BD%BF%E7%94%A8%E6%A8%A1%E6%9D%BF%E5%8F%98%E9%87%8F"><span class="toc-number">4.2.3.</span> <span class="toc-text"> 4.2.3 使用模板变量</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E6%80%BB%E7%BB%93"><span class="toc-number">5.</span> <span class="toc-text"> 5. 总结</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/10/17/hello-world/" title="Hello World">Hello World</a><time datetime="2025-10-17T08:58:31.842Z" title="发表于 2025-10-17 16:58:31">2025-10-17</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/07/15/Grafana%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E7%B2%BE%E9%80%9A/" title="Grafana从入门到精通">Grafana从入门到精通</a><time datetime="2025-07-15T06:50:23.000Z" title="发表于 2025-07-15 14:50:23">2025-07-15</time></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2025 By 識魚逐鹿</span><span class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.5.1</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=5.5.1"></script><script src="/js/main.js?v=5.5.1"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>