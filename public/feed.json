{
    "version": "https://jsonfeed.org/version/1",
    "title": "識魚逐鹿",
    "description": "毕竟几人真得鹿，不知终日梦为鱼。\nHow few the deer in truth attain,\nWhile most as fish in dreams remain.\n",
    "home_page_url": "https://liuzexiao.com",
    "items": [
        {
            "id": "https://liuzexiao.com/2025/10/17/hello-world/",
            "url": "https://liuzexiao.com/2025/10/17/hello-world/",
            "title": "Hello World",
            "date_published": "2025-10-17T08:58:31.842Z",
            "content_html": "<p>Welcome to <a href=\"https://hexo.io/\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\">GitHub</a>.</p>\n<h2 id=\"quick-start\"><a class=\"markdownIt-Anchor\" href=\"#quick-start\">#</a> Quick Start</h2>\n<h3 id=\"create-a-new-post\"><a class=\"markdownIt-Anchor\" href=\"#create-a-new-post\">#</a> Create a new post</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>h</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ hexo new <span class=\"token string\">\"My New Post\"</span></pre></td></tr></table></figure><p>More info: <a href=\"https://hexo.io/docs/writing.html\">Writing</a></p>\n<h3 id=\"run-server\"><a class=\"markdownIt-Anchor\" href=\"#run-server\">#</a> Run server</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>h</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ hexo server</pre></td></tr></table></figure><p>More info: <a href=\"https://hexo.io/docs/server.html\">Server</a></p>\n<h3 id=\"generate-static-files\"><a class=\"markdownIt-Anchor\" href=\"#generate-static-files\">#</a> Generate static files</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>h</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ hexo generate</pre></td></tr></table></figure><p>More info: <a href=\"https://hexo.io/docs/generating.html\">Generating</a></p>\n<h3 id=\"deploy-to-remote-sites\"><a class=\"markdownIt-Anchor\" href=\"#deploy-to-remote-sites\">#</a> Deploy to remote sites</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>h</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ hexo deploy</pre></td></tr></table></figure><p>More info: <a href=\"https://hexo.io/docs/one-command-deployment.html\">Deployment</a></p>\n",
            "tags": []
        },
        {
            "id": "https://liuzexiao.com/2025/07/15/Grafana%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E7%B2%BE%E9%80%9A/",
            "url": "https://liuzexiao.com/2025/07/15/Grafana%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E7%B2%BE%E9%80%9A/",
            "title": "Grafana从入门到精通",
            "date_published": "2025-07-15T06:50:23.000Z",
            "content_html": "<p><strong>Grafana</strong> 是一个功能强大的开源平台，专为监控和数据可视化而设计。它能够帮助用户以直观的方式展示和分析时间序列数据，如服务器性能指标、应用程序日志、数据库查询结果等。Grafana 支持多种数据源，包括 Prometheus、InfluxDB、Graphite、Elasticsearch 等，并提供了丰富的图表类型和插件，使其成为 DevOps、IT 运营和数据分析领域的首选工具。</p>\n<p>本文将带你从 Grafana 的基础知识开始，逐步深入到其高级功能，帮助你全面掌握这一工具。无论你是初学者还是有一定经验的用户，都能在这里找到有价值的内容。本文共约 5000 字，涵盖安装、核心功能、高级特性和实际用例，结构清晰，适合学习和参考。</p>\n<hr>\n<h2 id=\"1-grafana-入门\"><a class=\"markdownIt-Anchor\" href=\"#1-grafana-入门\">#</a> 1. Grafana 入门</h2>\n<h3 id=\"11-什么是-grafana\"><a class=\"markdownIt-Anchor\" href=\"#11-什么是-grafana\">#</a> 1.1 什么是 Grafana？</h3>\n<p>Grafana 是一个开源的监控和数据可视化平台，最初由 Torkel Ödegaard 于 2014 年创建。它允许用户通过仪表板（Dashboard）展示来自各种数据源的数据，支持多种图表类型，如折线图、柱状图、热力图等。Grafana 的设计目标是提供一个灵活、易用的界面，使用户能够快速创建和分享数据可视化。</p>\n<p>其主要特点包括：</p>\n<ul>\n<li><strong>多数据源支持</strong>：兼容 Prometheus、InfluxDB、MySQL、PostgreSQL 等。</li>\n<li><strong>丰富的可视化选项</strong>：提供多种图表和插件。</li>\n<li><strong>高度可定制性</strong>：支持模板变量、动态查询等。</li>\n</ul>\n<h3 id=\"12-安装-grafana\"><a class=\"markdownIt-Anchor\" href=\"#12-安装-grafana\">#</a> 1.2 安装 Grafana</h3>\n<p>Grafana 支持在多种操作系统上安装，包括 Linux、Windows 和 macOS。以下是安装的基本步骤。</p>\n<h4 id=\"121-在-linux-上安装\"><a class=\"markdownIt-Anchor\" href=\"#121-在-linux-上安装\">#</a> 1.2.1 在 Linux 上安装</h4>\n<ul>\n<li>\n<p><strong>Debian/Ubuntu</strong>：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> update</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> <span class=\"token parameter variable\">-y</span> adduser libfontconfig1</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token function\">wget</span> https://dl.grafana.com/oss/release/grafana_8.0.0_amd64.deb</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token function\">sudo</span> dpkg <span class=\"token parameter variable\">-i</span> grafana_8.0.0_amd64.deb</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token function\">sudo</span> systemctl start grafana-server</pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token function\">sudo</span> systemctl <span class=\"token builtin class-name\">enable</span> grafana-server</pre></td></tr></table></figure></li>\n<li>\n<p><strong>Red Hat/CentOS</strong>：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">sudo</span> yum <span class=\"token function\">install</span> <span class=\"token parameter variable\">-y</span> https://dl.grafana.com/oss/release/grafana-8.0.0-1.x86_64.rpm</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">sudo</span> systemctl start grafana-server</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token function\">sudo</span> systemctl <span class=\"token builtin class-name\">enable</span> grafana-server</pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"122-在-windows-上安装\"><a class=\"markdownIt-Anchor\" href=\"#122-在-windows-上安装\">#</a> 1.2.2 在 Windows 上安装</h4>\n<ol>\n<li>从 <a href=\"https://grafana.com/grafana/download\">Grafana 官网</a> 下载 Windows 安装包。</li>\n<li>运行安装程序，按照提示完成安装。</li>\n<li>安装完成后，手动启动 Grafana 服务或通过命令行运行：<pre><code class=\"language-cmd\">grafana-server.exe\n</code></pre>\n</li>\n</ol>\n<h4 id=\"123-在-macos-上安装\"><a class=\"markdownIt-Anchor\" href=\"#123-在-macos-上安装\">#</a> 1.2.3 在 macOS 上安装</h4>\n<ul>\n<li>使用 Homebrew：<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>brew update</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>brew <span class=\"token function\">install</span> grafana</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>brew services start grafana</pre></td></tr></table></figure></li>\n</ul>\n<p>安装完成后，访问  <code>http://localhost:3000</code> ，默认用户名和密码均为  <code>admin</code> 。首次登录后，建议更改密码。</p>\n<h3 id=\"13-配置数据源\"><a class=\"markdownIt-Anchor\" href=\"#13-配置数据源\">#</a> 1.3 配置数据源</h3>\n<p>数据源是 Grafana 的基础，用于连接外部数据存储。以下是如何配置常见数据源的步骤。</p>\n<h4 id=\"131-添加-prometheus-数据源\"><a class=\"markdownIt-Anchor\" href=\"#131-添加-prometheus-数据源\">#</a> 1.3.1 添加 Prometheus 数据源</h4>\n<ol>\n<li>登录 Grafana。</li>\n<li>点击左侧菜单 <strong>Configuration</strong>（齿轮图标）&gt; <strong>Data Sources</strong>。</li>\n<li>点击 <strong>Add data source</strong>，选择 <strong>Prometheus</strong>。</li>\n<li>在 <strong>HTTP</strong> 部分，输入 Prometheus 的 URL（例如  <code>http://localhost:9090</code> ）。</li>\n<li>点击 <strong>Save &amp; Test</strong> 验证连接。</li>\n</ol>\n<h4 id=\"132-添加-influxdb-数据源\"><a class=\"markdownIt-Anchor\" href=\"#132-添加-influxdb-数据源\">#</a> 1.3.2 添加 InfluxDB 数据源</h4>\n<ol>\n<li>选择 <strong>InfluxDB</strong> 数据源。</li>\n<li>输入 URL（如  <code>http://localhost:8086</code> ）、数据库名称、用户名和密码。</li>\n<li>点击 <strong>Save &amp; Test</strong>。</li>\n</ol>\n<p>完成配置后，Grafana 即可从数据源拉取数据用于可视化。</p>\n<hr>\n<h2 id=\"2-grafana-核心功能\"><a class=\"markdownIt-Anchor\" href=\"#2-grafana-核心功能\">#</a> 2. Grafana 核心功能</h2>\n<h3 id=\"21-仪表板dashboard\"><a class=\"markdownIt-Anchor\" href=\"#21-仪表板dashboard\">#</a> 2.1 仪表板（Dashboard）</h3>\n<p>仪表板是 Grafana 的核心组件，用于组织和展示多个面板（Panel）。</p>\n<h4 id=\"211-创建仪表板\"><a class=\"markdownIt-Anchor\" href=\"#211-创建仪表板\">#</a> 2.1.1 创建仪表板</h4>\n<ol>\n<li>点击左侧菜单 <strong>+</strong> 图标 &gt; <strong>Dashboard</strong>。</li>\n<li>点击 <strong>Add new panel</strong>。</li>\n<li>选择数据源并输入查询。</li>\n<li>选择图表类型（如折线图）。</li>\n<li>配置标题、描述等，点击 <strong>Apply</strong> 保存。</li>\n</ol>\n<h4 id=\"212-管理仪表板\"><a class=\"markdownIt-Anchor\" href=\"#212-管理仪表板\">#</a> 2.1.2 管理仪表板</h4>\n<ul>\n<li><strong>保存</strong>：点击右上角 <strong>Save</strong> 按钮。</li>\n<li><strong>分享</strong>：点击 <strong>Share</strong>，生成链接或嵌入代码。</li>\n<li><strong>导出 / 导入</strong>：通过 JSON 格式备份或恢复仪表板。</li>\n</ul>\n<h3 id=\"22-面板panel\"><a class=\"markdownIt-Anchor\" href=\"#22-面板panel\">#</a> 2.2 面板（Panel）</h3>\n<p>面板是仪表板的基本单元，支持多种可视化类型。</p>\n<h4 id=\"221-面板类型\"><a class=\"markdownIt-Anchor\" href=\"#221-面板类型\">#</a> 2.2.1 面板类型</h4>\n<ul>\n<li><strong>图表（Graph）</strong>：展示时间序列数据。</li>\n<li><strong>单值（Singlestat）</strong>：显示单个指标。</li>\n<li><strong>表格（Table）</strong>：以表格形式展示数据。</li>\n<li><strong>热力图（Heatmap）</strong>：显示数据密度。</li>\n</ul>\n<h4 id=\"222-配置面板\"><a class=\"markdownIt-Anchor\" href=\"#222-配置面板\">#</a> 2.2.2 配置面板</h4>\n<ol>\n<li>在面板编辑模式下，选择数据源。</li>\n<li>输入查询（如 PromQL 或 SQL）。</li>\n<li>调整图表样式、颜色、图例等。</li>\n</ol>\n<h4 id=\"223-使用模板变量\"><a class=\"markdownIt-Anchor\" href=\"#223-使用模板变量\">#</a> 2.2.3 使用模板变量</h4>\n<p>模板变量使仪表板更具交互性。例如，创建一个服务器选择器：</p>\n<ol>\n<li>点击仪表板设置（齿轮图标）&gt; <strong>Variables</strong>。</li>\n<li>点击 <strong>Add variable</strong>。</li>\n<li>设置名称（如  <code>server</code> ），类型为 <strong>Query</strong>。</li>\n<li>输入查询（如  <code>label_values(node_cpu_seconds_total, instance)</code> ）。</li>\n<li>在面板查询中使用变量：<figure class=\"highlight promql\"><figcaption data-lang=\"promql\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">rate</span><span class=\"token punctuation\">(</span>node_cpu_seconds_total<span class=\"token context-labels\"><span class=\"token punctuation\">&#123;</span><span class=\"token label-key attr-name\">instance</span><span class=\"token punctuation\">=</span><span class=\"token label-value attr-value\">\"$server\"</span><span class=\"token punctuation\">&#125;</span></span><span class=\"token context-range\"><span class=\"token punctuation\">[</span><span class=\"token range-duration number\">5m</span><span class=\"token punctuation\">]</span></span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure></li>\n</ol>\n<h3 id=\"23-查询语言\"><a class=\"markdownIt-Anchor\" href=\"#23-查询语言\">#</a> 2.3 查询语言</h3>\n<p>查询语言因数据源而异。以下是常见示例：</p>\n<h4 id=\"231-promqlprometheus\"><a class=\"markdownIt-Anchor\" href=\"#231-promqlprometheus\">#</a> 2.3.1 PromQL（Prometheus）</h4>\n<figure class=\"highlight promql\"><figcaption data-lang=\"promql\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">sum</span><span class=\"token punctuation\">(</span><span class=\"token function\">rate</span><span class=\"token punctuation\">(</span>http_requests_total<span class=\"token context-range\"><span class=\"token punctuation\">[</span><span class=\"token range-duration number\">5m</span><span class=\"token punctuation\">]</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">by</span> <span class=\"token vector-match\"><span class=\"token punctuation\">(</span><span class=\"token label-key attr-name\">status_code</span><span class=\"token punctuation\">)</span></span></pre></td></tr></table></figure><p>显示每 5 分钟的 HTTP 请求速率，按状态码分组。</p>\n<h4 id=\"232-influxqlinfluxdb\"><a class=\"markdownIt-Anchor\" href=\"#232-influxqlinfluxdb\">#</a> 2.3.2 InfluxQL（InfluxDB）</h4>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">SELECT</span> mean<span class=\"token punctuation\">(</span><span class=\"token string\">\"value\"</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">FROM</span> <span class=\"token string\">\"cpu_usage\"</span> <span class=\"token keyword\">WHERE</span> <span class=\"token keyword\">time</span> <span class=\"token operator\">>=</span> <span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token number\">1</span>h <span class=\"token keyword\">GROUP</span> <span class=\"token keyword\">BY</span> <span class=\"token keyword\">time</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span>m<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>显示过去 1 小时的 CPU 使用率，每 10 分钟平均。</p>\n<hr>\n<h2 id=\"3-grafana-高级功能\"><a class=\"markdownIt-Anchor\" href=\"#3-grafana-高级功能\">#</a> 3. Grafana 高级功能</h2>\n<h3 id=\"31-警报alerting\"><a class=\"markdownIt-Anchor\" href=\"#31-警报alerting\">#</a> 3.1 警报（Alerting）</h3>\n<p>Grafana 允许设置警报，当数据达到阈值时通知用户。</p>\n<h4 id=\"311-设置警报\"><a class=\"markdownIt-Anchor\" href=\"#311-设置警报\">#</a> 3.1.1 设置警报</h4>\n<ol>\n<li>在面板编辑模式下，点击 <strong>Alert</strong> 选项卡。</li>\n<li>点击 <strong>Create Alert</strong>。</li>\n<li>配置条件（如  <code>WHEN avg() OF query(A) IS ABOVE 80</code> ）。</li>\n<li>设置通知渠道（需提前配置，如 Email 或 Slack）。</li>\n<li>保存警报规则。</li>\n</ol>\n<h4 id=\"312-管理警报\"><a class=\"markdownIt-Anchor\" href=\"#312-管理警报\">#</a> 3.1.2 管理警报</h4>\n<ul>\n<li><strong>状态</strong>：仪表板上以图标显示警报状态（绿色正常，红色触发）。</li>\n<li><strong>历史</strong>：在 <strong>Alerting</strong> &gt; <strong>Alert Rules</strong> 查看。</li>\n</ul>\n<h3 id=\"32-用户管理与权限控制\"><a class=\"markdownIt-Anchor\" href=\"#32-用户管理与权限控制\">#</a> 3.2 用户管理与权限控制</h3>\n<p>Grafana 提供用户和团队管理功能，适合多人协作。</p>\n<h4 id=\"321-用户管理\"><a class=\"markdownIt-Anchor\" href=\"#321-用户管理\">#</a> 3.2.1 用户管理</h4>\n<ul>\n<li>\n<p><strong>添加用户</strong>：</p>\n<ol>\n<li>点击 <strong>Configuration</strong> &gt; <strong>Users</strong>。</li>\n<li>点击 <strong>Invite User</strong>，输入邮箱和角色（Admin、Editor、Viewer）。</li>\n</ol>\n</li>\n<li>\n<p><strong>角色说明</strong>：</p>\n<ul>\n<li><strong>Admin</strong>：完全控制。</li>\n<li><strong>Editor</strong>：可编辑仪表板。</li>\n<li><strong>Viewer</strong>：只读权限。</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"322-团队管理\"><a class=\"markdownIt-Anchor\" href=\"#322-团队管理\">#</a> 3.2.2 团队管理</h4>\n<ul>\n<li><strong>创建团队</strong>：\n<ol>\n<li>点击 <strong>Configuration</strong> &gt; <strong>Teams</strong>。</li>\n<li>点击 <strong>New Team</strong>，添加成员。</li>\n</ol>\n</li>\n<li><strong>权限</strong>：为团队分配仪表板或文件夹访问权限。</li>\n</ul>\n<h3 id=\"33-插件\"><a class=\"markdownIt-Anchor\" href=\"#33-插件\">#</a> 3.3 插件</h3>\n<p>插件扩展了 Grafana 的功能。</p>\n<h4 id=\"331-安装插件\"><a class=\"markdownIt-Anchor\" href=\"#331-安装插件\">#</a> 3.3.1 安装插件</h4>\n<ul>\n<li>\n<p><strong>命令行</strong>：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>grafana-cli plugins <span class=\"token function\">install</span> grafana-piechart-panel</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">sudo</span> systemctl restart grafana-server</pre></td></tr></table></figure></li>\n<li>\n<p><strong>手动</strong>：下载插件 ZIP 文件，解压到 Grafana 插件目录。</p>\n</li>\n</ul>\n<h4 id=\"332-常用插件\"><a class=\"markdownIt-Anchor\" href=\"#332-常用插件\">#</a> 3.3.2 常用插件</h4>\n<ul>\n<li><strong>Pie Chart</strong>：饼图展示。</li>\n<li><strong>Worldmap Panel</strong>：地理数据可视化。</li>\n<li><strong>Zabbix</strong>：集成 Zabbix 数据。</li>\n</ul>\n<hr>\n<h2 id=\"4-实际用例和示例\"><a class=\"markdownIt-Anchor\" href=\"#4-实际用例和示例\">#</a> 4. 实际用例和示例</h2>\n<h3 id=\"41-监控服务器性能\"><a class=\"markdownIt-Anchor\" href=\"#41-监控服务器性能\">#</a> 4.1 监控服务器性能</h3>\n<p>假设使用 Prometheus 收集服务器指标。</p>\n<h4 id=\"411-配置数据源\"><a class=\"markdownIt-Anchor\" href=\"#411-配置数据源\">#</a> 4.1.1 配置数据源</h4>\n<ul>\n<li>添加 Prometheus 数据源（URL： <code>http://localhost:9090</code> ）。</li>\n</ul>\n<h4 id=\"412-创建仪表板\"><a class=\"markdownIt-Anchor\" href=\"#412-创建仪表板\">#</a> 4.1.2 创建仪表板</h4>\n<ol>\n<li>创建仪表板，添加 <strong>Graph</strong> 面板。</li>\n<li>查询 CPU 使用率：<figure class=\"highlight promql\"><figcaption data-lang=\"promql\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token number\">100</span> <span class=\"token operator\">-</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">avg</span> <span class=\"token keyword\">by</span> <span class=\"token vector-match\"><span class=\"token punctuation\">(</span><span class=\"token label-key attr-name\">instance</span><span class=\"token punctuation\">)</span></span> <span class=\"token punctuation\">(</span><span class=\"token function\">irate</span><span class=\"token punctuation\">(</span>node_cpu_seconds_total<span class=\"token context-labels\"><span class=\"token punctuation\">&#123;</span><span class=\"token label-key attr-name\">mode</span><span class=\"token punctuation\">=</span><span class=\"token label-value attr-value\">\"idle\"</span><span class=\"token punctuation\">&#125;</span></span><span class=\"token context-range\"><span class=\"token punctuation\">[</span><span class=\"token range-duration number\">5m</span><span class=\"token punctuation\">]</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure></li>\n<li>查询内存使用率：<figure class=\"highlight promql\"><figcaption data-lang=\"promql\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">(</span>node_memory_MemTotal_bytes <span class=\"token operator\">-</span> node_memory_MemAvailable_bytes<span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> node_memory_MemTotal_bytes <span class=\"token operator\">*</span> <span class=\"token number\">100</span></pre></td></tr></table></figure></li>\n</ol>\n<h4 id=\"413-设置警报\"><a class=\"markdownIt-Anchor\" href=\"#413-设置警报\">#</a> 4.1.3 设置警报</h4>\n<ul>\n<li>在 CPU 面板上设置警报，条件：CPU 使用率 &gt; 80% 持续 5 分钟。</li>\n</ul>\n<h3 id=\"42-分析-web-应用程序性能\"><a class=\"markdownIt-Anchor\" href=\"#42-分析-web-应用程序性能\">#</a> 4.2 分析 Web 应用程序性能</h3>\n<p>假设使用 InfluxDB 存储请求数据。</p>\n<h4 id=\"421-配置数据源\"><a class=\"markdownIt-Anchor\" href=\"#421-配置数据源\">#</a> 4.2.1 配置数据源</h4>\n<ul>\n<li>添加 InfluxDB 数据源（URL： <code>http://localhost:8086</code> ）。</li>\n</ul>\n<h4 id=\"422-创建仪表板\"><a class=\"markdownIt-Anchor\" href=\"#422-创建仪表板\">#</a> 4.2.2 创建仪表板</h4>\n<ol>\n<li>添加 <strong>Graph</strong> 面板。</li>\n<li>查询响应时间：<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">SELECT</span> mean<span class=\"token punctuation\">(</span><span class=\"token string\">\"response_time\"</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">FROM</span> <span class=\"token string\">\"http_requests\"</span> <span class=\"token keyword\">WHERE</span> <span class=\"token keyword\">time</span> <span class=\"token operator\">>=</span> <span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token number\">1</span>h <span class=\"token keyword\">GROUP</span> <span class=\"token keyword\">BY</span> <span class=\"token keyword\">time</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span>m<span class=\"token punctuation\">)</span></pre></td></tr></table></figure></li>\n</ol>\n<h4 id=\"423-使用模板变量\"><a class=\"markdownIt-Anchor\" href=\"#423-使用模板变量\">#</a> 4.2.3 使用模板变量</h4>\n<ul>\n<li>添加变量  <code>status_code</code> ，查询： <code>SHOW TAG VALUES WITH KEY = &quot;status_code&quot;</code> 。</li>\n<li>修改查询：<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">SELECT</span> mean<span class=\"token punctuation\">(</span><span class=\"token string\">\"response_time\"</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">FROM</span> <span class=\"token string\">\"http_requests\"</span> <span class=\"token keyword\">WHERE</span> <span class=\"token string\">\"status_code\"</span> <span class=\"token operator\">=</span> $status_code <span class=\"token operator\">AND</span> <span class=\"token keyword\">time</span> <span class=\"token operator\">>=</span> <span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token number\">1</span>h <span class=\"token keyword\">GROUP</span> <span class=\"token keyword\">BY</span> <span class=\"token keyword\">time</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span>m<span class=\"token punctuation\">)</span></pre></td></tr></table></figure></li>\n</ul>\n<hr>\n<h2 id=\"5-总结\"><a class=\"markdownIt-Anchor\" href=\"#5-总结\">#</a> 5. 总结</h2>\n<p>Grafana 是一个强大且灵活的工具，适用于服务器监控、应用程序性能分析等多种场景。本文从安装配置到高级功能，结合实际用例，全面介绍了 Grafana 的使用方法。要精通 Grafana，建议多实践，探索插件和 API 集成等功能。Grafana 社区提供了丰富的资源，如官方文档和论坛，可供深入学习。</p>\n<hr>\n<p><strong>参考资料</strong>：</p>\n<ul>\n<li><a href=\"https://grafana.com/docs/\">Grafana 官方文档</a></li>\n<li><a href=\"https://prometheus.io/docs/\">Prometheus 官方文档</a></li>\n<li><a href=\"https://docs.influxdata.com/influxdb/\">InfluxDB 官方文档</a></li>\n</ul>\n<p><strong>作者</strong>：Assistant<br>\n<strong> 日期</strong>：2025 年 7 月 15 日</p>\n",
            "tags": []
        }
    ]
}